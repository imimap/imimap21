import { Document, model, Model, ObjectId, Schema } from "mongoose";
import { IPdfDocument, PdfDocumentSchema } from "./pdfDocument";
import { IEvent } from "./event";

export interface IInternshipModule extends Document {
  internships: ObjectId[],
  inSemester: string, //should be type Semester or so, maybe an enum/ generated by function, eg "WiSe2021"
  inSemesterOfStudy: number,
  AepPassed: boolean,
  reportPdf: IPdfDocument,
  completeDocumentsPdf: IPdfDocument,
  //events: IInternshipEvent[], // extends Event?
}

const InternshipModuleSchema = new Schema({
  internships: [
    {
      ref: "Internship",
      type: Schema.Types.ObjectId,
    },
  ],
  inSemester: {
    type: String, //should be type Semester or so, maybe an enum/ generated by function, eg "WiSe2021"
    default: getUpcomingSemester(),
  },
  inSemesterOfStudy: {
    type: Number,
    default: 4,
  },
  AepPassed: {
    type: Boolean,
    default: false,
  },
  reportPdf: {
    type: PdfDocumentSchema,
  },
  completeDocumentsPdf: {
    type: PdfDocumentSchema,
  },
  events: [
    {
      //type: InternshipEventSchema,
    },
  ],
});

export const InternshipModule: Model<IInternshipModule> = model(
  "InternshipModule",
  InternshipModuleSchema
);
